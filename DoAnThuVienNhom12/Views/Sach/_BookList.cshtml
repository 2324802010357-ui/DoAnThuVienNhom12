@model IEnumerable<DoAnThuVienNhom12.Models.Sach>

<table class="table table-bordered table-hover table-striped">
    <thead style="background-color:#2c3e50; color:white;">
        <tr>
            <th style="width:80px;">Mã sách</th>
            <th>Tên sách</th>
            <th>Tác giả</th>
            <th>Danh mục</th>
            <th>Nhà xuất bản</th> <!-- ✅ THÊM CỘT NXB RIÊNG -->
            <th style="width:90px;">Năm XB</th>
            <th style="width:90px;">Số lượng</th>
            <th style="width:120px;">Tình trạng</th>
            <th style="width:140px;">Thao tác</th>
        </tr>
    </thead>

    <tbody>
        @if (Model != null && Model.Any())
        {
            foreach (var s in Model)
            {
                <tr>
                    <td>@s.MaSach</td>
                    <td>
                        <strong>@s.TenSach</strong><br />
                        <small class="text-muted">
                            @if (!string.IsNullOrEmpty(s.TuKhoa))
                            {
                                <i class="fa fa-tags"></i> @s.TuKhoa
                            }
                        </small>
                    </td>

                    <!-- ✅ Hiển thị đúng dữ liệu -->
                    <td>@(s.TacGia?.TenTacGia ?? "—")</td>
                    <td>@(s.DanhMuc?.TenDanhMuc ?? "—")</td>
                    <td>@(s.NhaXuatBan?.TenNXB ?? "—")</td> <!-- ✅ Cột NXB -->
                    <td>@s.NamXuatBan</td> <!-- ✅ Năm xuất bản đúng cột -->
                    <td>@s.SoLuong</td>

                    <td>
                        @if (s.TinhTrang == "Còn hàng")
                        {
                            <span class="label label-success">Còn hàng</span>
                        }
                        else
                        {
                            <span class="label label-danger">Hết hàng</span>
                        }
                    </td>

                    <td class="text-center">
                        <a href="@Url.Action("Detail", "Sach", new { id = s.MaSach })"
                           class="btn btn-xs btn-info" title="Xem chi tiết">
                            <i class="fa fa-eye"></i>
                        </a>
                        <a href="@Url.Action("Edit", "Sach", new { id = s.MaSach })"
                           class="btn btn-xs btn-warning" title="Sửa thông tin">
                            <i class="fa fa-pencil"></i>
                        </a>
                        <a href="@Url.Action("Delete", "Sach", new { id = s.MaSach })"
                           class="btn btn-xs btn-danger" title="Xóa sách"
                           onclick="return confirm('Bạn có chắc muốn xóa sách này không?');">
                            <i class="fa fa-trash"></i>
                        </a>
                    </td>
                </tr>
            }
        }
        else
        {
            <tr>
                <td colspan="9" class="text-center text-muted">
                    <i class="fa fa-info-circle"></i> Không có sách nào được tìm thấy.
                </td>
            </tr>
        }
    </tbody>
</table>

<style>
    .table td, .table th {
        vertical-align: middle !important;
        text-align: center;
    }

    .label-success {
        background-color: #27ae60;
    }

    .label-danger {
        background-color: #c0392b;
    }

    .btn-xs {
        margin-right: 2px;
    }

    .text-muted {
        font-size: 12px;
        color: #777;
    }
</style>
