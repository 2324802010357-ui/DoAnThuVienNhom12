@{
    ViewBag.Title = "Đăng nhập";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .login-container {
        min-height: 70vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f5f7fb;
        background-image: linear-gradient(135deg, rgba(102,126,234,0.2), rgba(118,75,162,0.2));
    }

    .login-card {
        background: white;
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        overflow: hidden;
        width: 100%;
        max-width: 450px;
        margin: 20px;
    }

    .login-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 40px 30px;
        text-align: center;
        color: white;
    }

        .login-header h3 {
            margin: 0;
            font-size: 26px;
            font-weight: 600;
        }

    .login-body {
        padding: 40px 30px;
    }

    .form-group {
        position: relative;
        margin-bottom: 25px;
    }

    .form-control {
        border: 2px solid #e1e5e9;
        border-radius: 12px;
        padding: 15px 20px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: #f8f9fa;
        width: 100%;
        box-sizing: border-box;
    }

        .form-control:focus {
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 4px rgba(102,126,234,0.1);
            outline: none;
        }

    .input-icon {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        color: #6c757d;
        font-size: 18px;
    }

    .input-with-icon {
        padding-left: 50px;
    }

    .toggle-password {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: #6c757d;
        cursor: pointer;
        font-size: 16px;
    }

    .btn-login {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        border-radius: 12px;
        padding: 15px;
        font-size: 16px;
        font-weight: 600;
        color: white;
        width: 100%;
        transition: all 0.3s ease;
        cursor: pointer;
        margin-top: 10px;
    }

        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102,126,234,0.4);
        }

    .alert {
        margin-top: 15px;
        text-align: center;
        background-color: #ffe6e6;
        border: 1px solid #ffcccc;
        color: #d9534f;
        border-radius: 10px;
        padding: 10px;
    }

    .remember-me {
        display: flex;
        align-items: center;
        margin: 15px 0;
    }
</style>

<div class="login-container">
    <div class="login-card">
        <div class="login-header">
            <i class="fa fa-book" style="font-size:40px;margin-bottom:10px;"></i>
            <h3>Đăng nhập hệ thống</h3>
            <p>Quản lý thư viện</p>
        </div>
        <div class="login-body">
            <form method="post" action="@Url.Action("DangNhap", "NguoiDung")">
                @Html.AntiForgeryToken() <!-- ✅ THÊM TOKEN BẢO MẬT Ở ĐÂY -->

                <div class="form-group">
                    <i class="fa fa-user input-icon"></i>
                    <input type="text" name="tenDangNhap" class="form-control input-with-icon"
                           placeholder="Tên đăng nhập hoặc Email" required>
                </div>

                <div class="form-group">
                    <i class="fa fa-lock input-icon"></i>
                    <input type="password" name="matKhau" class="form-control input-with-icon"
                           placeholder="Mật khẩu" style="padding-right: 50px;" required>
                    <button type="button" class="toggle-password" onclick="togglePassword()">
                        <i class="fa fa-eye"></i>
                    </button>
                </div>

                <div class="remember-me">
                    <input type="checkbox" id="remember" style="margin-right:8px;">
                    <label for="remember">Ghi nhớ đăng nhập</label>
                </div>

                <button type="submit" class="btn-login">
                    <i class="fa fa-sign-in" style="margin-right:8px;"></i> Đăng nhập
                </button>

                @if (ViewBag.ThongBao != null)
                {
                    <div class="alert">@ViewBag.ThongBao</div>
                }
            </form>
        </div>
    </div>
</div>

<script>
    function togglePassword() {
        var passwordInput = document.querySelector('input[name="matKhau"]');
        var toggleIcon = document.querySelector('.toggle-password i');

        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            toggleIcon.className = 'fa fa-eye-slash';
        } else {
            passwordInput.type = 'password';
            toggleIcon.className = 'fa fa-eye';
        }
    }
</script>
